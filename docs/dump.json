[
  {
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/endpoint_handler.js",
    "memberof": null,
    "longname": "lib/endpoint_handler.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "'use strict';\nimport errors from '@hoist/errors';\nimport logger from '@hoist/logger';\nimport Boom from 'boom';\nimport Moment from 'moment';\nimport {\n  routeFromPath\n}\nfrom './url_helpers';\nimport {\n  Publisher\n}\nfrom '@hoist/broker';\nimport {\n  Organisation,\n  Application,\n  EventMetric,\n  Event\n}\nfrom '@hoist/model';\nimport {\n  clone,\n  isObject,\n  extend\n}\nfrom 'lodash';\nimport uuid from 'uuid';\n\n/**\n * class to handle incoming requests\n */\n\nclass EndpointHandler {\n  /**\n   * create new handler\n   */\n  constructor() {\n    this._logger = logger.child({\n      cls: this.constructor.name\n    });\n    this._publisher = new Publisher();\n  }\n\n  /**\n   * handle incoming requests and turn them into events\n   * @returns {Promise}\n   */\n  onRequest(req, reply) {\n    this._logger.info('got a webhook request');\n    return Organisation.findOneAsync({\n        slug: req.params.orgSlug\n      }).then((organisation) => {\n        if (!organisation) {\n          throw new errors.model.NotFoundError();\n        }\n        return Application.findOneAsync({\n          slug: req.params.appSlug,\n          organisation: organisation._id\n        });\n      }).then((application) => {\n        if (!application) {\n          throw new errors.model.NotFoundError();\n        }\n        if ((!application.settings.live) || (!application.settings.live.endpoints)) {\n          throw new errors.Http404Error('No Endpoint Found');\n        }\n        this._logger.info({\n          application: application._id\n        }, 'found org and app');\n        req.params.endpoint = '/' + req.params.endpoint;\n        return Promise.resolve(routeFromPath(application.settings.live.endpoints, req.method, req.params.endpoint))\n          .then((route) => {\n            this._logger.info({\n              application: application._id,\n              route: route,\n              endpoint: 'req.params.endpoint'\n            }, 'mapped route');\n            if (!route) {\n              throw new errors.Http404Error('No Endpoint Found');\n            }\n            this._logger.info('got an endpoint');\n            var payload = clone(route, true);\n            delete payload.event;\n            delete payload.method;\n            delete payload.authenticate;\n            if (req.method.toLowerCase() === 'post') {\n              if (isObject(req.payload)) {\n                payload = extend(payload, req.payload);\n              }\n            }\n\n            payload._request = {\n              body: req.payload,\n              headers: req.headers,\n              url: req.params.endpoint,\n              method: req.method\n            };\n\n            var queryString = req.url.search;\n\n            if (queryString) {\n              payload._request.queryString = queryString;\n              payload._request.query = req.url.query;\n            }\n\n            delete payload._request.headers.host;\n            this._logger.info('building event');\n            var ev = new Event({\n              eventId: uuid.v4().split('-').join(''),\n              applicationId: application._id,\n              eventName: route.event,\n              environment: 'live',\n              correlationId: require('uuid').v4(),\n              payload: payload\n            });\n            return ev;\n          });\n      })\n      .then((event) => {\n        this._logger.info({\n          event: event\n        }, 'sending event to broker');\n\n        return this._publisher.publish(event)\n          .then(() => {\n            var raisedDate = new Moment();\n            var update = {\n              $inc: {}\n            };\n            update.$inc.totalRaised = 1;\n            update.$inc['raised.' + raisedDate.utc().minutes()] = 1;\n            EventMetric.updateAsync({\n              application: event.applicationId,\n              environment: 'live',\n              eventName: event.eventName,\n              timestampHour: raisedDate.utc().startOf('hour').toDate()\n            }, update, {\n              upsert: true\n            }).catch(function (err) {\n              this._logger.alert(err);\n              this._logger.error(err);\n            });\n            return event;\n          });\n      })\n      .then((event) => {\n        this._logger.info('sending reply');\n        var response = reply(event.toObject());\n        response.header('x-hoist-cid', event.correlationId);\n        response.header('x-hoist-eid', event.eventId);\n        response.statusCode = 201;\n      }).catch((err) => {\n        this._logger.error(err);\n        if (!errors.isHoistError(err)) {\n          console.log(err);\n          this._logger.alert(err);\n          err = new errors.HoistError();\n        }\n        this._logger.info('sending error reply');\n        reply(Boom.wrap(err, parseInt(err.code)));\n      });\n  }\n}\n\n\nexport default EndpointHandler;\n"
  },
  {
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "EndpointHandler",
    "memberof": "lib/endpoint_handler.js",
    "longname": "lib/endpoint_handler.js~EndpointHandler",
    "access": null,
    "export": true,
    "importPath": "@hoist/endpoint.hoi.io/lib/endpoint_handler.js",
    "importStyle": "EndpointHandler",
    "description": "class to handle incoming requests",
    "lineNumber": 33,
    "interface": false
  },
  {
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "lib/endpoint_handler.js~EndpointHandler",
    "longname": "lib/endpoint_handler.js~EndpointHandler#constructor",
    "access": null,
    "description": "create new handler",
    "lineNumber": 37,
    "params": [],
    "generator": false
  },
  {
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_logger",
    "memberof": "lib/endpoint_handler.js~EndpointHandler",
    "longname": "lib/endpoint_handler.js~EndpointHandler#_logger",
    "access": null,
    "description": null,
    "lineNumber": 38,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_publisher",
    "memberof": "lib/endpoint_handler.js~EndpointHandler",
    "longname": "lib/endpoint_handler.js~EndpointHandler#_publisher",
    "access": null,
    "description": null,
    "lineNumber": 41,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "onRequest",
    "memberof": "lib/endpoint_handler.js~EndpointHandler",
    "longname": "lib/endpoint_handler.js~EndpointHandler#onRequest",
    "access": null,
    "description": "handle incoming requests and turn them into events",
    "lineNumber": 48,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise}"
      }
    ],
    "params": [
      {
        "name": "req",
        "types": [
          "*"
        ]
      },
      {
        "name": "reply",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise"
      ],
      "spread": false,
      "description": ""
    },
    "generator": false
  },
  {
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "endpointHandler",
    "memberof": "lib/endpoint_handler.js",
    "longname": "lib/endpoint_handler.js~endpointHandler",
    "access": null,
    "export": true,
    "importPath": "@hoist/endpoint.hoi.io/lib/endpoint_handler.js",
    "importStyle": "endpointHandler",
    "description": null,
    "lineNumber": 166,
    "undocument": true,
    "type": {
      "types": [
        "lib/endpoint_handler.js~EndpointHandler"
      ]
    }
  },
  {
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/router.js",
    "memberof": null,
    "longname": "lib/router.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "'use strict';\nimport EndpointHandler from './endpoint_handler';\nimport logger from '@hoist/logger';\n\n/**\n * maps routes to handlers for this server\n */\n\nclass Router {\n  /**\n   * create a new router\n   */\n  constructor() {\n    this._logger = logger.child({\n      cls: this.constructor.name\n    });\n    this._endpointHandler = new EndpointHandler();\n  }\n\n  /**\n   * map routes to endpoints on the server\n   */\n  mapRoutes(server) {\n    server.route({\n      path: '/{orgSlug}/{appSlug}/{endpoint*}',\n      handler: this._endpointHandler.onRequest,\n      config: {\n        bind: this._endpointHandler,\n        payload: {\n          parse: true,\n          maxBytes: '2097152',\n          output: 'data'\n        }\n      },\n      method: ['POST']\n    });\n    server.route({\n      path: '/{orgSlug}/{appSlug}/{endpoint*}',\n      handler: this._endpointHandler.onRequest,\n      config: {\n        bind: this._endpointHandler\n      },\n      method: ['GET']\n    });\n  }\n}\n\n\nexport default Router;\n"
  },
  {
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Router",
    "memberof": "lib/router.js",
    "longname": "lib/router.js~Router",
    "access": null,
    "export": true,
    "importPath": "@hoist/endpoint.hoi.io/lib/router.js",
    "importStyle": "Router",
    "description": "maps routes to handlers for this server",
    "lineNumber": 9,
    "interface": false
  },
  {
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "lib/router.js~Router",
    "longname": "lib/router.js~Router#constructor",
    "access": null,
    "description": "create a new router",
    "lineNumber": 13,
    "params": [],
    "generator": false
  },
  {
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_logger",
    "memberof": "lib/router.js~Router",
    "longname": "lib/router.js~Router#_logger",
    "access": null,
    "description": null,
    "lineNumber": 14,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_endpointHandler",
    "memberof": "lib/router.js~Router",
    "longname": "lib/router.js~Router#_endpointHandler",
    "access": null,
    "description": null,
    "lineNumber": 17,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "mapRoutes",
    "memberof": "lib/router.js~Router",
    "longname": "lib/router.js~Router#mapRoutes",
    "access": null,
    "description": "map routes to endpoints on the server",
    "lineNumber": 23,
    "params": [
      {
        "name": "server",
        "types": [
          "*"
        ]
      }
    ],
    "generator": false
  },
  {
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "router",
    "memberof": "lib/router.js",
    "longname": "lib/router.js~router",
    "access": null,
    "export": true,
    "importPath": "@hoist/endpoint.hoi.io/lib/router.js",
    "importStyle": "router",
    "description": null,
    "lineNumber": 49,
    "undocument": true,
    "type": {
      "types": [
        "lib/router.js~Router"
      ]
    }
  },
  {
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/server.js",
    "memberof": null,
    "longname": "lib/server.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "'use strict';\nimport Hapi from 'hapi';\nimport config from 'config';\nimport {\n  _mongoose\n}\nfrom '@hoist/model';\nimport Router from './router';\nimport logger from '@hoist/logger';\nimport Bluebird from 'bluebird';\nBluebird.promisifyAll(_mongoose);\n\n\n/**\n * the Hoist endpoint server\n */\nclass Server {\n  /**\n   * create a new instance of the server\n   */\n  constructor() {\n    this._logger = logger.child({\n      cls: this.constructor.name\n    });\n    this._router = new Router();\n  }\n  _createHapiServer() {\n    this._logger.info('creating hapi server');\n    this._hapi = new Hapi.Server();\n    Bluebird.promisifyAll(this._hapi);\n    this._hapi.connection({\n      host: config.get('Hoist.server.host'),\n      port: config.get('Hoist.server.port')\n    });\n    this._router.mapRoutes(this._hapi);\n  }\n\n  /**\n   * start the server\n   * @returns {Promise}\n   */\n  start() {\n    return _mongoose.connectAsync(config.get('Hoist.mongo.core.connectionString'))\n      .then(() => {\n        this._createHapiServer();\n        return this._hapi.startAsync()\n          .then(() => {\n            logger.info('server started');\n          });\n      });\n  }\n\n  /**\n   * stop the server\n   * @returns {Promise}\n   */\n  stop() {\n    this._logger.info('stoping server');\n    return Promise.resolve()\n      .then(() => {\n        if (this._hapi) {\n          this._logger.info('server shutting down');\n          return this._hapi.stopAsync().then(() => {\n            delete this._hapi;\n            return _mongoose.disconnectAsync().then(() => {\n              logger.info('server shutdown');\n            });\n          });\n        }\n      });\n  }\n}\n\nexport default Server;\n"
  },
  {
    "kind": "class",
    "static": true,
    "variation": null,
    "name": "Server",
    "memberof": "lib/server.js",
    "longname": "lib/server.js~Server",
    "access": null,
    "export": true,
    "importPath": "@hoist/endpoint.hoi.io/lib/server.js",
    "importStyle": "Server",
    "description": "the Hoist endpoint server",
    "lineNumber": 17,
    "interface": false
  },
  {
    "kind": "constructor",
    "static": false,
    "variation": null,
    "name": "constructor",
    "memberof": "lib/server.js~Server",
    "longname": "lib/server.js~Server#constructor",
    "access": null,
    "description": "create a new instance of the server",
    "lineNumber": 21,
    "params": [],
    "generator": false
  },
  {
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_logger",
    "memberof": "lib/server.js~Server",
    "longname": "lib/server.js~Server#_logger",
    "access": null,
    "description": null,
    "lineNumber": 22,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_router",
    "memberof": "lib/server.js~Server",
    "longname": "lib/server.js~Server#_router",
    "access": null,
    "description": null,
    "lineNumber": 25,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "_createHapiServer",
    "memberof": "lib/server.js~Server",
    "longname": "lib/server.js~Server#_createHapiServer",
    "access": null,
    "description": null,
    "lineNumber": 27,
    "undocument": true,
    "params": [],
    "generator": false
  },
  {
    "kind": "member",
    "static": false,
    "variation": null,
    "name": "_hapi",
    "memberof": "lib/server.js~Server",
    "longname": "lib/server.js~Server#_hapi",
    "access": null,
    "description": null,
    "lineNumber": 29,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    }
  },
  {
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "start",
    "memberof": "lib/server.js~Server",
    "longname": "lib/server.js~Server#start",
    "access": null,
    "description": "start the server",
    "lineNumber": 42,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise}"
      }
    ],
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "Promise"
      ],
      "spread": false,
      "description": ""
    },
    "generator": false
  },
  {
    "kind": "method",
    "static": false,
    "variation": null,
    "name": "stop",
    "memberof": "lib/server.js~Server",
    "longname": "lib/server.js~Server#stop",
    "access": null,
    "description": "stop the server",
    "lineNumber": 57,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise}"
      }
    ],
    "params": [],
    "return": {
      "nullable": null,
      "types": [
        "Promise"
      ],
      "spread": false,
      "description": ""
    },
    "generator": false
  },
  {
    "kind": "variable",
    "static": true,
    "variation": null,
    "name": "server",
    "memberof": "lib/server.js",
    "longname": "lib/server.js~server",
    "access": null,
    "export": true,
    "importPath": "@hoist/endpoint.hoi.io/lib/server.js",
    "importStyle": "server",
    "description": null,
    "lineNumber": 74,
    "undocument": true,
    "type": {
      "types": [
        "lib/server.js~Server"
      ]
    }
  },
  {
    "kind": "file",
    "static": true,
    "variation": null,
    "name": "lib/url_helpers.js",
    "memberof": null,
    "longname": "lib/url_helpers.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "'use strict';\nimport Router from 'routes';\nimport {\n  keys, assign, any\n}\nfrom 'lodash';\nRegExp.escape = function (s) {\n  return s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n};\n\n/**\n * maps a specific path to the correct route within an apps settings\n */\nexport function routeFromPath(endpoints, method, path) {\n  var router = new Router();\n  if (endpoints && path && method) {\n\n    var routes = keys(endpoints);\n    if (routes.length > 0) {\n      routes.forEach((r) => {\n        router.addRoute(r, () => {\n          return endpoints[r];\n        });\n      });\n      var match = router.match(path);\n      if (match) {\n        var endpoint = match.fn();\n        var methods = [].concat(endpoint.methods);\n\n        if (any(methods, function (m) {\n            return m.toLowerCase() === method.toLowerCase();\n          })) {\n          var params = assign(match.params, endpoint);\n          delete params.methods;\n          return params;\n\n        }\n      }\n    }\n  }\n  return null;\n}\n"
  },
  {
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "escape",
    "memberof": "lib/url_helpers.js",
    "longname": "lib/url_helpers.js~escape",
    "access": null,
    "export": false,
    "importPath": "@hoist/endpoint.hoi.io/lib/url_helpers.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 7,
    "undocument": true,
    "params": [
      {
        "name": "s",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "generator": false
  },
  {
    "kind": "function",
    "static": true,
    "variation": null,
    "name": "routeFromPath",
    "memberof": "lib/url_helpers.js",
    "longname": "lib/url_helpers.js~routeFromPath",
    "access": null,
    "export": true,
    "importPath": "@hoist/endpoint.hoi.io/lib/url_helpers.js",
    "importStyle": "{routeFromPath}",
    "description": "maps a specific path to the correct route within an apps settings",
    "lineNumber": 14,
    "params": [
      {
        "name": "endpoints",
        "types": [
          "*"
        ]
      },
      {
        "name": "method",
        "types": [
          "*"
        ]
      },
      {
        "name": "path",
        "types": [
          "*"
        ]
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    },
    "generator": false
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Infinity",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Infinity",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "NaN",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NaN",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~NaN",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "undefined",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~undefined",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "null",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~null",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Object",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~object",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Function",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~function",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Boolean",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~boolean",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Symbol",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Symbol",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Error",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Error",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "EvalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/EvalError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~EvalError",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "InternalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/InternalError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~InternalError",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "RangeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RangeError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~RangeError",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "ReferenceError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~ReferenceError",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "SyntaxError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~SyntaxError",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "TypeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~TypeError",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "URIError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/URIError",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~URIError",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Number",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~number",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Date",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Date",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "String",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~String",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "string",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~string",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "RegExp",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~RegExp",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Array",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Int8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int8Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Int8Array",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Uint8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Uint8Array",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Uint8ClampedArray",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Uint8ClampedArray",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Int16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int16Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Int16Array",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Uint16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Uint16Array",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Int32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int32Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Int32Array",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Uint32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Uint32Array",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Float32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Float32Array",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Float64Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float64Array",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Float64Array",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Map",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Map",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Set",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Set",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "WeakMap",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~WeakMap",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "WeakSet",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~WeakSet",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "ArrayBuffer",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~ArrayBuffer",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "DataView",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~DataView",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "JSON",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~JSON",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Promise",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Promise",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Generator",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Generator",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "GeneratorFunction",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/GeneratorFunction",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~GeneratorFunction",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Reflect",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Reflect",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Proxy",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy",
    "memberof": "BuiltinExternal/ECMAScriptExternal.js",
    "longname": "BuiltinExternal/ECMAScriptExternal.js~Proxy",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "CanvasRenderingContext2D",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~CanvasRenderingContext2D",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "DocumentFragment",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~DocumentFragment",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Element",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/Element",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~Element",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Event",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/Event",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~Event",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "Node",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/Node",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~Node",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "NodeList",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/API/NodeList",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~NodeList",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "external",
    "static": true,
    "variation": null,
    "name": "XMLHttpRequest",
    "externalLink": "https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest",
    "memberof": "BuiltinExternal/WebAPIExternal.js",
    "longname": "BuiltinExternal/WebAPIExternal.js~XMLHttpRequest",
    "access": null,
    "description": null,
    "builtinExternal": true
  },
  {
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "tests/unit_tests/endpoint_handler_tests.js",
    "memberof": null,
    "longname": "tests/unit_tests/endpoint_handler_tests.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "'use strict';\nimport config from 'config';\nimport Server from '../../lib/server';\nimport Bluebird from 'bluebird';\nimport sinon from 'sinon';\nimport {\n  expect\n}\nfrom 'chai';\nimport {\n  _mongoose,\n  Organisation,\n  Application\n}\nfrom '@hoist/model';\nBluebird.promisifyAll(_mongoose);\n\n/** @test {EndpointHandler#onRequest} */\ndescribe('EndpointHandler', function () {\n  let server;\n  before(() => {\n    server = new Server();\n    server._createHapiServer();\n  });\n  describe('#onRequest', function () {\n    describe('with no matching organisation', function () {\n      var _response;\n      before(() => {\n        return _mongoose.connectAsync(config.get('Hoist.mongo.core.connectionString'))\n          .then(() => {\n            return new Promise((resolve) => {\n                server._hapi.inject({\n                  method: 'GET',\n                  url: '/org/app/endpoint'\n                }, (res) => {\n                  resolve(res);\n                });\n              })\n              .then(function (res) {\n                _response = res;\n              });\n          });\n      });\n      after(() => {\n        return _mongoose.disconnectAsync();\n      });\n      it('returns a 404 response', function () {\n        expect(_response.statusCode).to.eql(404);\n      });\n    });\n    describe('with no matching application', function () {\n      var _response;\n      before(() => {\n        sinon.stub(Organisation, 'findOneAsync').returns(Promise.resolve(\n          new Organisation({\n            _id: 'orgid'\n          })\n        ));\n        return _mongoose.connectAsync(config.get('Hoist.mongo.core.connectionString'))\n          .then(() => {\n            return new Promise((resolve) => {\n              server._hapi.inject({\n                method: 'GET',\n                url: '/org/app/endpoint'\n              }, function (res) {\n                resolve(res);\n              });\n            });\n          }).then((res) => {\n            _response = res;\n          });\n      });\n      after(() => {\n        Organisation.findOneAsync.restore();\n        return _mongoose.disconnectAsync();\n      });\n      it('returns a 404 response', function () {\n        expect(_response.statusCode).to.eql(404);\n      });\n    });\n    describe('with no endpoints', function () {\n      var _response;\n      before(() => {\n        sinon.stub(Organisation, 'findOneAsync').returns(Promise.resolve(\n          new Organisation({\n            _id: 'orgid'\n          })\n        ));\n        sinon.stub(Application, 'findOneAsync').returns(Promise.resolve(\n          new Application({\n\n          })\n        ));\n        return _mongoose.connectAsync(config.get('Hoist.mongo.core.connectionString'))\n          .then(() => {\n            return new Promise((resolve) => {\n              server._hapi.inject({\n                method: 'GET',\n                url: '/org/app/endpoint'\n              }, function (res) {\n                _response = res;\n                resolve();\n              });\n            });\n          });\n      });\n      after(() => {\n        Application.findOneAsync.restore();\n        Organisation.findOneAsync.restore();\n        return _mongoose.disconnectAsync();\n      });\n      it('returns a 404 response', function () {\n        expect(_response.statusCode).to.eql(404);\n      });\n    });\n    describe('with matching endpoints', function () {\n      var _response;\n      before(() => {\n        sinon.stub(Organisation, 'findOneAsync').returns(Promise.resolve(\n          new Organisation({\n            _id: 'orgid'\n          })\n        ));\n        sinon.stub(Application, 'findOneAsync').returns(Promise.resolve(\n          new Application({\n            settings: {\n              live: {\n                endpoints: {\n                  '/something/else': {\n                    methods: ['GET']\n                  }\n                }\n              }\n            }\n          })\n        ));\n        return _mongoose.connectAsync(config.get('Hoist.mongo.core.connectionString'))\n          .then(() => {\n            return new Promise((resolve) => {\n              server._hapi.inject({\n                method: 'GET',\n                url: '/org/app/endpoint'\n              }, function (res) {\n                _response = res;\n                resolve();\n              });\n            });\n          });\n      });\n      after(() => {\n        Application.findOneAsync.restore();\n        Organisation.findOneAsync.restore();\n        return _mongoose.disconnectAsync();\n      });\n      it('returns a 404 response', function () {\n        expect(_response.statusCode).to.eql(404);\n      });\n    });\n  });\n});\n"
  },
  {
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe0",
    "testId": 0,
    "memberof": "tests/unit_tests/endpoint_handler_tests.js",
    "testDepth": 0,
    "longname": "tests/unit_tests/endpoint_handler_tests.js~describe0",
    "access": null,
    "description": "EndpointHandler",
    "lineNumber": 19,
    "unknown": [
      {
        "tagName": "@test",
        "tagValue": "{EndpointHandler#onRequest}"
      }
    ],
    "testTargets": [
      "EndpointHandler#onRequest"
    ]
  },
  {
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe1",
    "testId": 1,
    "memberof": "tests/unit_tests/endpoint_handler_tests.js~describe0",
    "testDepth": 1,
    "longname": "tests/unit_tests/endpoint_handler_tests.js~describe0.describe1",
    "access": null,
    "description": "#onRequest",
    "lineNumber": 25
  },
  {
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe2",
    "testId": 2,
    "memberof": "tests/unit_tests/endpoint_handler_tests.js~describe0.describe1",
    "testDepth": 2,
    "longname": "tests/unit_tests/endpoint_handler_tests.js~describe0.describe1.describe2",
    "access": null,
    "description": "with no matching organisation",
    "lineNumber": 26
  },
  {
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it3",
    "testId": 3,
    "memberof": "tests/unit_tests/endpoint_handler_tests.js~describe0.describe1.describe2",
    "testDepth": 3,
    "longname": "tests/unit_tests/endpoint_handler_tests.js~describe0.describe1.describe2.it3",
    "access": null,
    "description": "returns a 404 response",
    "lineNumber": 47
  },
  {
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe4",
    "testId": 4,
    "memberof": "tests/unit_tests/endpoint_handler_tests.js~describe0.describe1",
    "testDepth": 2,
    "longname": "tests/unit_tests/endpoint_handler_tests.js~describe0.describe1.describe4",
    "access": null,
    "description": "with no matching application",
    "lineNumber": 51
  },
  {
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it5",
    "testId": 5,
    "memberof": "tests/unit_tests/endpoint_handler_tests.js~describe0.describe1.describe4",
    "testDepth": 3,
    "longname": "tests/unit_tests/endpoint_handler_tests.js~describe0.describe1.describe4.it5",
    "access": null,
    "description": "returns a 404 response",
    "lineNumber": 77
  },
  {
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe6",
    "testId": 6,
    "memberof": "tests/unit_tests/endpoint_handler_tests.js~describe0.describe1",
    "testDepth": 2,
    "longname": "tests/unit_tests/endpoint_handler_tests.js~describe0.describe1.describe6",
    "access": null,
    "description": "with no endpoints",
    "lineNumber": 81
  },
  {
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it7",
    "testId": 7,
    "memberof": "tests/unit_tests/endpoint_handler_tests.js~describe0.describe1.describe6",
    "testDepth": 3,
    "longname": "tests/unit_tests/endpoint_handler_tests.js~describe0.describe1.describe6.it7",
    "access": null,
    "description": "returns a 404 response",
    "lineNumber": 112
  },
  {
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe8",
    "testId": 8,
    "memberof": "tests/unit_tests/endpoint_handler_tests.js~describe0.describe1",
    "testDepth": 2,
    "longname": "tests/unit_tests/endpoint_handler_tests.js~describe0.describe1.describe8",
    "access": null,
    "description": "with matching endpoints",
    "lineNumber": 116
  },
  {
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it9",
    "testId": 9,
    "memberof": "tests/unit_tests/endpoint_handler_tests.js~describe0.describe1.describe8",
    "testDepth": 3,
    "longname": "tests/unit_tests/endpoint_handler_tests.js~describe0.describe1.describe8.it9",
    "access": null,
    "description": "returns a 404 response",
    "lineNumber": 155
  },
  {
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "tests/unit_tests/server_tests.js",
    "memberof": null,
    "longname": "tests/unit_tests/server_tests.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "'use strict';\nimport Hapi from 'hapi';\nimport sinon from 'sinon';\nimport Server from '../../lib/server';\nimport {\n  expect\n}\nfrom 'chai';\nimport {\n  _mongoose\n}\nfrom '@hoist/model';\n\n/** @test {Server} */\ndescribe('Server', function () {\n  let server;\n  before(() => {\n    server = new Server();\n  });\n  /** @test {Server#start} */\n  describe('#start', function () {\n    before(() => {\n      sinon.stub(Hapi.Server.prototype, 'start').callsArg(0);\n      sinon.spy(Hapi.Server.prototype, 'connection');\n      sinon.stub(_mongoose, 'connect').callsArg(1);\n      server.start();\n    });\n    after(function () {\n      Hapi.Server.prototype.start.restore();\n      Hapi.Server.prototype.connection.restore();\n      _mongoose.connect.restore();\n    });\n    it('starts a hapi server', function () {\n      return expect(Hapi.Server.prototype.start)\n        .to.have.been.called;\n    });\n    it('listens to a port', function () {\n      return expect(Hapi.Server.prototype.connection)\n        .to.have.been.calledWith({\n          host: \"0.0.0.0\",\n          port: 8000\n        });\n    });\n    it('opens up a mongoose connection', function () {\n      return expect(_mongoose.connect)\n        .to.have.been.calledWith('mongodb://db/hoist-test');\n    });\n  });\n});\n"
  },
  {
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe10",
    "testId": 10,
    "memberof": "tests/unit_tests/server_tests.js",
    "testDepth": 0,
    "longname": "tests/unit_tests/server_tests.js~describe10",
    "access": null,
    "description": "Server",
    "lineNumber": 15,
    "unknown": [
      {
        "tagName": "@test",
        "tagValue": "{Server}"
      }
    ],
    "testTargets": [
      "Server"
    ]
  },
  {
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe11",
    "testId": 11,
    "memberof": "tests/unit_tests/server_tests.js~describe10",
    "testDepth": 1,
    "longname": "tests/unit_tests/server_tests.js~describe10.describe11",
    "access": null,
    "description": "#start",
    "lineNumber": 21,
    "unknown": [
      {
        "tagName": "@test",
        "tagValue": "{Server#start}"
      }
    ],
    "testTargets": [
      "Server#start"
    ]
  },
  {
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it12",
    "testId": 12,
    "memberof": "tests/unit_tests/server_tests.js~describe10.describe11",
    "testDepth": 2,
    "longname": "tests/unit_tests/server_tests.js~describe10.describe11.it12",
    "access": null,
    "description": "starts a hapi server",
    "lineNumber": 33
  },
  {
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it13",
    "testId": 13,
    "memberof": "tests/unit_tests/server_tests.js~describe10.describe11",
    "testDepth": 2,
    "longname": "tests/unit_tests/server_tests.js~describe10.describe11.it13",
    "access": null,
    "description": "listens to a port",
    "lineNumber": 37
  },
  {
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it14",
    "testId": 14,
    "memberof": "tests/unit_tests/server_tests.js~describe10.describe11",
    "testDepth": 2,
    "longname": "tests/unit_tests/server_tests.js~describe10.describe11.it14",
    "access": null,
    "description": "opens up a mongoose connection",
    "lineNumber": 44
  },
  {
    "kind": "testFile",
    "static": true,
    "variation": null,
    "name": "tests/unit_tests/url_helpers_tests.js",
    "memberof": null,
    "longname": "tests/unit_tests/url_helpers_tests.js",
    "access": null,
    "description": null,
    "lineNumber": 1,
    "content": "'use strict';\nimport {\n  routeFromPath\n}\nfrom '../../lib/url_helpers';\nimport {\n  expect\n}\nfrom 'chai';\n\ndescribe('url helper functions', function () {\n  /** test {routeFromPath} */\n  describe('routeFromPath', function () {\n    it('returns null if no endpoints', function () {\n      expect(routeFromPath({}, 'POST', '/mixedCaseName/status?name=ryan')).to.eql(null);\n    });\n    it('returns null if null endpoints', function () {\n      expect(routeFromPath(null, 'GET', '/mixedCaseName/status?name=ryan')).to.eql(null);\n    });\n    it('returns endpoint if direct match', function () {\n      expect(routeFromPath({\n        '/status': {\n          'methods': ['GET'],\n          'event': 'get.invoices',\n          'authenticated': true\n        }\n      }, 'GET', '/status')).to.eql({\n        'event': 'get.invoices',\n        'authenticated': true\n      });\n    });\n    it('returns endpoint if parametered match', function () {\n      expect(routeFromPath({\n        '/status/:name': {\n          'methods': ['GET', 'POST'],\n          'event': 'get.invoices',\n          'authenticated': true\n        }\n      }, 'POST', '/status/ryan')).to.eql({\n        'event': 'get.invoices',\n        'authenticated': true,\n        'name': 'ryan'\n      });\n    });\n    it('returns null if methods dont match', function () {\n      expect(routeFromPath({\n        '/status/:name': {\n          'methods': ['GET'],\n          'event': 'get.invoices',\n          'authenticated': true\n        }\n      }, 'POST', '/status/ryan')).to.eql(null);\n    });\n  });\n});\n"
  },
  {
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe15",
    "testId": 15,
    "memberof": "tests/unit_tests/url_helpers_tests.js",
    "testDepth": 0,
    "longname": "tests/unit_tests/url_helpers_tests.js~describe15",
    "access": null,
    "description": "url helper functions",
    "lineNumber": 11
  },
  {
    "kind": "testDescribe",
    "static": true,
    "variation": null,
    "name": "describe16",
    "testId": 16,
    "memberof": "tests/unit_tests/url_helpers_tests.js~describe15",
    "testDepth": 1,
    "longname": "tests/unit_tests/url_helpers_tests.js~describe15.describe16",
    "access": null,
    "description": "test {routeFromPath}",
    "lineNumber": 13
  },
  {
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it17",
    "testId": 17,
    "memberof": "tests/unit_tests/url_helpers_tests.js~describe15.describe16",
    "testDepth": 2,
    "longname": "tests/unit_tests/url_helpers_tests.js~describe15.describe16.it17",
    "access": null,
    "description": "returns null if no endpoints",
    "lineNumber": 14
  },
  {
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it18",
    "testId": 18,
    "memberof": "tests/unit_tests/url_helpers_tests.js~describe15.describe16",
    "testDepth": 2,
    "longname": "tests/unit_tests/url_helpers_tests.js~describe15.describe16.it18",
    "access": null,
    "description": "returns null if null endpoints",
    "lineNumber": 17
  },
  {
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it19",
    "testId": 19,
    "memberof": "tests/unit_tests/url_helpers_tests.js~describe15.describe16",
    "testDepth": 2,
    "longname": "tests/unit_tests/url_helpers_tests.js~describe15.describe16.it19",
    "access": null,
    "description": "returns endpoint if direct match",
    "lineNumber": 20
  },
  {
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it20",
    "testId": 20,
    "memberof": "tests/unit_tests/url_helpers_tests.js~describe15.describe16",
    "testDepth": 2,
    "longname": "tests/unit_tests/url_helpers_tests.js~describe15.describe16.it20",
    "access": null,
    "description": "returns endpoint if parametered match",
    "lineNumber": 32
  },
  {
    "kind": "testIt",
    "static": true,
    "variation": null,
    "name": "it21",
    "testId": 21,
    "memberof": "tests/unit_tests/url_helpers_tests.js~describe15.describe16",
    "testDepth": 2,
    "longname": "tests/unit_tests/url_helpers_tests.js~describe15.describe16.it21",
    "access": null,
    "description": "returns null if methods dont match",
    "lineNumber": 45
  }
]